ARG FINAL_NAME
FROM ${FINAL_NAME} as final
FROM ubuntu:20.04

ARG BIGDL_VERSION=2.2.0-SNAPSHOT
ARG SPARK_VERSION=3.1.3
ARG HADOOP_VERSION=3.2.0
ARG SPARK_SCALA_VERSION=2.12
ENV SPARK_SCALA_VERSION=${SPARK_SCALA_VERSION}
ENV HADOOP_VERSION=${HADOOP_VERSION}
ENV SPARK_VERSION=${SPARK_VERSION}
ENV BIGDL_VERSION=${BIGDL_VERSION}
ENV SPARK_HOME=/opt/spark
ENV BIGDL_HOME=/opt/bigdl-${BIGDL_VERSION}
ENV JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
ENV SGX_MEM_SIZE=20GB

ARG HTTP_PROXY_HOST
ARG HTTP_PROXY_PORT
ARG HTTPS_PROXY_HOST
ARG HTTPS_PROXY_PORT

COPY --from=final /opt/occlum_spark /opt/occlum_spark